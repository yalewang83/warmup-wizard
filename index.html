<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Warm-Up Wizard - Golf Pre-Round Routines</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: system-ui, sans-serif; background: #f8fafc; min-height: 100vh; }
        .container { max-width: 800px; margin: 0 auto; padding: 0 16px; }
        .header { background: linear-gradient(135deg, #22c55e, #16a34a); color: white; padding: 32px 16px; text-align: center; }
        .header h1 { font-size: 2.5rem; margin-bottom: 8px; }
        .card { background: white; border-radius: 16px; box-shadow: 0 10px 25px rgba(0,0,0,0.1); padding: 32px; margin: 32px 0; }
        .time-display { background: #f1f5f9; border-radius: 12px; padding: 24px; text-align: center; margin-bottom: 24px; }
        .time-number { font-size: 3rem; font-weight: bold; color: #16a34a; }
        .time-unit { font-size: 1.5rem; color: #6b7280; margin-left: 8px; }
        .time-controls { display: flex; align-items: center; gap: 16px; margin: 16px 0; justify-content: center; }
        .time-btn { background: #22c55e; color: white; border: none; padding: 12px 16px; border-radius: 8px; cursor: pointer; }
        .time-slider { flex: 1; margin: 0 16px; height: 8px; background: #e2e8f0; border-radius: 4px; outline: none; -webkit-appearance: none; }
        .preset-buttons { display: flex; justify-content: center; gap: 8px; flex-wrap: wrap; }
        .preset-btn { background: #e2e8f0; border: none; padding: 12px 16px; border-radius: 8px; cursor: pointer; }
        .preset-btn.active, .preset-btn:hover { background: #22c55e; color: white; }
        .main-btn { width: 100%; background: linear-gradient(135deg, #22c55e, #16a34a); color: white; border: none; padding: 16px; border-radius: 12px; font-size: 1.25rem; cursor: pointer; }
        .routine-item { width: 100%; background: #f8fafc; border: none; padding: 16px; border-radius: 8px; text-align: left; cursor: pointer; margin-bottom: 12px; }
        .routine-item:hover { background: #ecfdf5; }
        .exercise-item { background: #f8fafc; padding: 16px; border-radius: 8px; border-left: 4px solid #22c55e; margin-bottom: 16px; }
        .exercise-header { display: flex; justify-content: space-between; }
        .exercise-time { background: #dcfce7; color: #166534; padding: 4px 8px; border-radius: 4px; font-size: 0.8rem; }
        .hidden { display: none !important; }
        .back-btn { color: #16a34a; text-decoration: none; cursor: pointer; }
        .screen-header { display: flex; align-items: center; justify-content: space-between; margin-bottom: 24px; }
        .exercise-title { font-size: 2rem; font-weight: bold; text-align: center; margin-bottom: 24px; }
        .timer-circle { width: 120px; height: 120px; border: 8px solid #e2e8f0; border-top: 8px solid #22c55e; border-radius: 50%; margin: 0 auto 16px; display: flex; align-items: center; justify-content: center; font-size: 1.5rem; font-weight: bold; }
        .video-container { margin: 16px 0; border-radius: 12px; overflow: hidden; }
        .video-wrapper { position: relative; padding-bottom: 56.25%; height: 0; }
        .video-wrapper iframe { position: absolute; top: 0; left: 0; width: 100%; height: 100%; border: none; }
        .controls { display: flex; justify-content: center; gap: 16px; margin-top: 24px; }
        .control-btn { padding: 12px 20px; border: none; border-radius: 8px; cursor: pointer; color: white; }
        .pause-btn { background: #fbbf24; }
        .skip-btn { background: #6b7280; }
        .next-btn { background: #22c55e; }
        .progress-bar-bg { width: 100%; height: 8px; background: #e2e8f0; border-radius: 4px; margin-bottom: 24px; }
        .progress-bar { height: 100%; background: #22c55e; transition: width 0.3s; }
        .feedback-buttons { display: flex; justify-content: center; gap: 16px; margin: 24px 0; }
        .feedback-btn { padding: 12px 20px; border: none; border-radius: 8px; cursor: pointer; color: white; }
        .feedback-good { background: #22c55e; }
        .feedback-okay { background: #fbbf24; }
        .feedback-hard { background: #ef4444; }
        .completion-icon { font-size: 4rem; text-align: center; margin-bottom: 16px; }
        .completion-title { font-size: 2rem; font-weight: bold; color: #16a34a; text-align: center; margin-bottom: 16px; }
    </style>
</head>
<body>
    <!-- Header -->
    <header class="header">
        <div class="container">
            <h1>‚õ≥ Warm-Up Wizard</h1>
            <p>Pro-style warm-ups tailored to your time</p>
        </div>
    </header>

    <main class="container">
        <!-- Home Screen -->
        <div id="homeScreen">
            <div class="card">
                <h2 style="text-align: center; margin-bottom: 32px;">‚è∞ Ready to warm up?</h2>
                
                <div class="time-display">
                    <span id="selectedTime" class="time-number">10</span>
                    <span class="time-unit">minutes</span>
                    <div class="time-controls">
                        <button id="decreaseTime" class="time-btn">- 5min</button>
                        <input type="range" id="timeSlider" class="time-slider" min="5" max="60" value="10" step="5">
                        <button id="increaseTime" class="time-btn">+ 5min</button>
                    </div>
                </div>

                <div style="margin-bottom: 24px;">
                    <p style="text-align: center; margin-bottom: 12px;">Quick Options:</p>
                    <div class="preset-buttons">
                        <button class="preset-btn" data-time="5">5min</button>
                        <button class="preset-btn active" data-time="10">10min</button>
                        <button class="preset-btn" data-time="15">15min</button>
                        <button class="preset-btn" data-time="20">20min</button>
                        <button class="preset-btn" data-time="30">30min</button>
                    </div>
                </div>

                <button id="generateRoutine" class="main-btn">Generate My Warm-Up</button>
            </div>

            <div class="card">
                <h3>üìã Quick Start Templates</h3>
                <div style="margin-top: 16px;">
                    <button class="routine-item" data-time="5">
                        <div style="font-weight: 600; margin-bottom: 4px;">Ultra-Quick Stretch (5 min)</div>
                        <div style="color: #6b7280; font-size: 0.9rem;">Essential stretches + practice swings</div>
                    </button>
                    <button class="routine-item" data-time="10">
                        <div style="font-weight: 600; margin-bottom: 4px;">Morning Power Warm-Up (10 min)</div>
                        <div style="color: #6b7280; font-size: 0.9rem;">Dynamic stretching + swing prep</div>
                    </button>
                    <button class="routine-item" data-time="20">
                        <div style="font-weight: 600; margin-bottom: 4px;">Complete Pre-Round Routine (20 min)</div>
                        <div style="color: #6b7280; font-size: 0.9rem;">Full body prep + short game practice</div>
                    </button>
                </div>
            </div>
        </div>

        <!-- Routine Screen -->
        <div id="routineScreen" class="hidden">
            <div class="card">
                <div class="screen-header">
                    <button id="backToHome" class="back-btn">‚Üê Back</button>
                    <h2 id="routineTitle">Your Warm-Up</h2>
                    <div></div>
                </div>
                <div id="exerciseList"></div>
                <button id="startRoutine" class="main-btn">Start Warm-Up</button>
            </div>
        </div>

        <!-- Exercise Screen -->
        <div id="exerciseScreen" class="hidden">
            <div class="card">
                <div class="progress-bar-bg">
                    <div id="progressBar" class="progress-bar" style="width: 20%"></div>
                </div>
                
                <h2 id="exerciseName" class="exercise-title">Exercise Name</h2>
                
                <div style="text-align: center;">
                    <div id="timerCircle" class="timer-circle">
                        <span id="exerciseTimer">0:30</span>
                    </div>
                </div>

                <div id="exerciseVideo" class="video-container"></div>

                <div style="text-align: center; background: #dbeafe; padding: 16px; border-radius: 8px; margin: 16px 0;">
                    <p id="exerciseDescription">Exercise description goes here</p>
                </div>

                <div class="controls">
                    <button id="pauseExercise" class="control-btn pause-btn">‚è∏ Pause</button>
                    <button id="skipExercise" class="control-btn skip-btn">‚è≠ Skip</button>
                    <button id="nextExercise" class="control-btn next-btn">Next ‚ñ∂</button>
                </div>
            </div>
        </div>

        <!-- Completion Screen -->
        <div id="completionScreen" class="hidden">
            <div class="card">
                <div class="completion-icon">üèåÔ∏è‚Äç‚ôÇÔ∏è</div>
                <h2 class="completion-title">You're Ready to Play!</h2>
                <p style="text-align: center; color: #6b7280; margin-bottom: 24px;">Great job completing your warm-up routine!</p>
                
                <div class="feedback-buttons">
                    <button class="feedback-btn feedback-good" data-feedback="good">üëç Felt Great</button>
                    <button class="feedback-btn feedback-okay" data-feedback="okay">üëå It Was Okay</button>
                    <button class="feedback-btn feedback-hard" data-feedback="hard">üëé Too Difficult</button>
                </div>

                <button id="startNewRoutine" class="main-btn">Start Another Routine</button>
            </div>
        </div>
    </main>

    <script>
        // Exercise database - temporarily without videos while we find embeddable ones
        const exercises = {
            5: [
                { name: "Arm Circles", duration: 60, description: "Make large, controlled circles with your arms. Start with small circles and gradually make them larger. Do 10 forward, then 10 backward.", videoId: "M7lc1UVf-VE" },
                { name: "Torso Twists", duration: 60, description: "Stand with feet shoulder-width apart. Rotate your torso left and right, keeping your hips facing forward.", videoId: null },
                { name: "Practice Swings", duration: 180, description: "Take slow, controlled practice swings. Focus on your posture, grip, and smooth tempo. Start with half swings, then progress to full swings.", videoId: null }
            ],
            10: [
                { name: "Arm Circles", duration: 60, description: "Make large, controlled circles with your arms. Start with small circles and gradually make them larger. Do 10 forward, then 10 backward.", videoId: null },
                { name: "Shoulder Rolls", duration: 45, description: "Roll your shoulders up, back, and down in a smooth circular motion. Do 10 backward rolls, then 10 forward rolls.", videoId: null },
                { name: "Hip Circles", duration: 60, description: "Place hands on hips and make circular motions. Keep your upper body upright. Do 10 circles each direction.", videoId: null },
                { name: "Leg Swings", duration: 75, description: "Hold a golf club or wall for balance. Swing one leg forward and back, then side to side. Switch legs and repeat.", videoId: null },
                { name: "Torso Twists", duration: 60, description: "Stand with feet shoulder-width apart. Rotate your torso left and right, keeping your hips facing forward.", videoId: null },
                { name: "Practice Swings", duration: 300, description: "Take practice swings focusing on tempo and form. Start with half swings, progress to full swings. Feel the rhythm.", videoId: null }
            ],
            15: [
                { name: "Arm Circles", duration: 60, description: "Warm up your shoulder joints with controlled circular motions. Start small, then make larger circles.", videoId: null },
                { name: "Shoulder Rolls", duration: 45, description: "Roll shoulders backward to release tension and improve mobility.", videoId: null },
                { name: "Hip Circles", duration: 60, description: "Improve hip mobility with gentle circular motions in both directions.", videoId: null },
                { name: "Leg Swings", duration: 90, description: "Dynamic leg stretching - swing forward/back and side to side for each leg.", videoId: null },
                { name: "Torso Twists", duration: 75, description: "Loosen your core muscles with progressive rotational movements.", videoId: null },
                { name: "Balance Exercise", duration: 90, description: "Stand on one foot for 15 seconds, then switch. Use golf club for balance if needed.", videoId: null },
                { name: "Practice Swings", duration: 300, description: "Focus on rhythm and tempo with varying swing speeds.", videoId: null },
                { name: "Putting Practice", duration: 180, description: "Practice your putting stroke motion without a ball. Focus on smooth, pendulum-like motion.", videoId: null }
            ],
            20: [
                { name: "Arm Circles", duration: 60, description: "Warm up shoulder joints with controlled circular movements.", videoId: null },
                { name: "Shoulder Rolls", duration: 60, description: "Release shoulder tension with slow, controlled rolls.", videoId: null },
                { name: "Hip Circles", duration: 75, description: "Hip mobility work - make slow, controlled circles in both directions.", videoId: null },
                { name: "Leg Swings", duration: 90, description: "Full range leg movement - front/back and side to side for both legs.", videoId: null },
                { name: "Torso Twists", duration: 90, description: "Core preparation with controlled rotational movements.", videoId: null },
                { name: "Ankle Rolls", duration: 60, description: "Roll ankles clockwise and counterclockwise to improve mobility.", videoId: null },
                { name: "Balance Exercise", duration: 120, description: "Advanced balance work - single leg stance with eyes closed.", videoId: null },
                { name: "Half Swings", duration: 180, description: "Controlled half swings focusing on club path and impact position.", videoId: null },
                { name: "Practice Swings", duration: 240, description: "Full swing preparation with emphasis on tempo and rhythm.", videoId: null },
                { name: "Putting Practice", duration: 180, description: "Putting fundamentals - stroke, alignment, and distance control.", videoId: null },
                { name: "Mental Prep", duration: 135, description: "Take deep breaths and visualize your first few shots. Set positive intentions for your round.", videoId: null }
            ],
            30: [
                { name: "Arm Circles", duration: 90, description: "Complete shoulder warm-up with small and large circles in both directions.", videoId: null },
                { name: "Shoulder Rolls", duration: 60, description: "Comprehensive tension release for shoulders and upper back.", videoId: null },
                { name: "Hip Circles", duration: 90, description: "Full hip mobility routine - circles, tilts, and rotations.", videoId: null },
                { name: "Leg Swings", duration: 120, description: "Complete hip mobility - all directions with increasing range of motion.", videoId: null },
                { name: "Torso Twists", duration: 90, description: "Progressive core work with increasing range of motion.", videoId: null },
                { name: "Ankle Rolls", duration: 60, description: "Full ankle mobility in all directions with calf stretches.", videoId: null },
                { name: "Balance Challenge", duration: 120, description: "Advanced balance exercises with movement and weight shifts.", videoId: null },
                { name: "Dynamic Stretching", duration: 180, description: "Walking lunges, leg kicks, and full body dynamic movements.", videoId: null },
                { name: "Half Swings", duration: 240, description: "Swing fundamentals with focus on positions and club path.", videoId: null },
                { name: "Practice Swings", duration: 300, description: "Full swing rhythm with tempo variations and swing thoughts.", videoId: null },
                { name: "Short Game Practice", duration: 240, description: "Chipping and pitching motion practice with different trajectories.", videoId: null },
                { name: "Putting Practice", duration: 180, description: "Stroke mechanics, distance control, and green reading practice.", videoId: null },
                { name: "Mental Preparation", duration: 240, description: "Comprehensive mental preparation - breathing, visualization, and course strategy.", videoId: null }
            ]
        };

        // App state
        let currentRoutine = [];
        let currentExerciseIndex = 0;
        let exerciseTimer = null;
        let timeRemaining = 0;
        let isPaused = false;
        let selectedMinutes = 10;

        // Error handling for video embedding
        function handleVideoError(iframe) {
            iframe.style.display = 'none';
            const fallback = iframe.parentElement.querySelector('#video-fallback');
            if (fallback) {
                fallback.style.display = 'block';
            }
        }

        // Initialize
        document.addEventListener('DOMContentLoaded', function() {
            setupEventListeners();
            updateTimeDisplay();
        });

        function setupEventListeners() {
            // Time controls
            document.getElementById('timeSlider').addEventListener('input', function(e) {
                selectedMinutes = parseInt(e.target.value);
                updateTimeDisplay();
                updatePresetButtons();
            });

            document.getElementById('decreaseTime').addEventListener('click', function() {
                selectedMinutes = Math.max(5, selectedMinutes - 5);
                updateTimeDisplay();
                updateSlider();
                updatePresetButtons();
            });

            document.getElementById('increaseTime').addEventListener('click', function() {
                selectedMinutes = Math.min(60, selectedMinutes + 5);
                updateTimeDisplay();
                updateSlider();
                updatePresetButtons();
            });

            // Preset buttons
            document.querySelectorAll('.preset-btn').forEach(button => {
                button.addEventListener('click', function() {
                    selectedMinutes = parseInt(this.dataset.time);
                    updateTimeDisplay();
                    updateSlider();
                    updatePresetButtons();
                });
            });

            // Quick routines
            document.querySelectorAll('.routine-item').forEach(button => {
                button.addEventListener('click', function() {
                    selectedMinutes = parseInt(this.dataset.time);
                    generateRoutine();
                });
            });

            // Main buttons
            document.getElementById('generateRoutine').addEventListener('click', generateRoutine);
            document.getElementById('startRoutine').addEventListener('click', startExerciseRoutine);
            document.getElementById('backToHome').addEventListener('click', showHomeScreen);
            document.getElementById('startNewRoutine').addEventListener('click', showHomeScreen);

            // Exercise controls
            document.getElementById('pauseExercise').addEventListener('click', togglePause);
            document.getElementById('skipExercise').addEventListener('click', nextExercise);
            document.getElementById('nextExercise').addEventListener('click', nextExercise);

            // Feedback
            document.querySelectorAll('.feedback-btn').forEach(button => {
                button.addEventListener('click', function() {
                    this.style.transform = 'scale(0.95)';
                    setTimeout(() => this.style.transform = 'scale(1)', 150);
                });
            });
        }

        function updateTimeDisplay() {
            document.getElementById('selectedTime').textContent = selectedMinutes;
        }

        function updateSlider() {
            document.getElementById('timeSlider').value = selectedMinutes;
        }

        function updatePresetButtons() {
            document.querySelectorAll('.preset-btn').forEach(button => {
                const time = parseInt(button.dataset.time);
                if (time === selectedMinutes) {
                    button.classList.add('active');
                } else {
                    button.classList.remove('active');
                }
            });
        }

        function generateRoutine() {
            let exerciseSet = exercises[selectedMinutes];
            if (!exerciseSet) {
                const availableTimes = Object.keys(exercises).map(Number).sort((a, b) => a - b);
                const closestTime = availableTimes.reduce((prev, curr) => 
                    Math.abs(curr - selectedMinutes) < Math.abs(prev - selectedMinutes) ? curr : prev
                );
                exerciseSet = exercises[closestTime];
            }

            currentRoutine = [...exerciseSet];
            displayRoutine();
            showRoutineScreen();
        }

        function displayRoutine() {
            const exerciseList = document.getElementById('exerciseList');
            const routineTitle = document.getElementById('routineTitle');
            
            routineTitle.textContent = `Your ${selectedMinutes}-Minute Warm-Up`;
            
            exerciseList.innerHTML = '';
            currentRoutine.forEach((exercise, index) => {
                const exerciseDiv = document.createElement('div');
                exerciseDiv.className = 'exercise-item';
                exerciseDiv.innerHTML = `
                    <div class="exercise-header">
                        <div>
                            <div style="font-weight: 600; margin-bottom: 4px;">${index + 1}. ${exercise.name}</div>
                            <div style="color: #6b7280; font-size: 0.9rem;">${exercise.description}</div>
                        </div>
                        <span class="exercise-time">${formatTime(exercise.duration)}</span>
                    </div>
                `;
                exerciseList.appendChild(exerciseDiv);
            });
        }

        function startExerciseRoutine() {
            currentExerciseIndex = 0;
            showExerciseScreen();
            startCurrentExercise();
        }

        function startCurrentExercise() {
            if (currentExerciseIndex >= currentRoutine.length) {
                showCompletionScreen();
                return;
            }

            const exercise = currentRoutine[currentExerciseIndex];
            timeRemaining = exercise.duration;
            
            // Update display
            document.getElementById('exerciseName').textContent = exercise.name;
            document.getElementById('exerciseDescription').textContent = exercise.description;
            
            // Embed video with proper YouTube embed format
            const videoContainer = document.getElementById('exerciseVideo');
            if (exercise.videoId && exercise.videoId !== null) {
                // First try the standard embed
                videoContainer.innerHTML = `
                    <div class="video-wrapper">
                        <iframe 
                            src="https://www.youtube.com/embed/${exercise.videoId}?rel=0&showinfo=0&controls=1&modestbranding=1&enablejsapi=1" 
                            frameborder="0"
                            allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" 
                            allowfullscreen
                            referrerpolicy="strict-origin-when-cross-origin"
                            onload="this.style.opacity=1;" 
                            onerror="handleVideoError(this);"
                            style="opacity:0; transition: opacity 0.3s;">
                        </iframe>
                        <div id="video-fallback" style="display: none; text-align: center; padding: 40px; background: #f1f5f9; border-radius: 8px;">
                            <p style="color: #6b7280; margin-bottom: 16px;">üì∫ Video demonstration unavailable</p>
                            <p style="color: #6b7280; font-size: 0.9rem;">Follow the description below to perform this exercise</p>
                        </div>
                    </div>
                `;
            } else {
                videoContainer.innerHTML = `
                    <div style="text-align: center; padding: 40px; background: #f1f5f9; border-radius: 8px;">
                        <p style="color: #6b7280; margin-bottom: 16px;">üì∫ Video demonstration coming soon</p>
                        <p style="color: #6b7280; font-size: 0.9rem;">Follow the description below to perform this exercise</p>
                    </div>
                `;
            }
            
            updateTimerDisplay();
            updateProgressBar();
            
            // Start timer
            isPaused = false;
            exerciseTimer = setInterval(updateTimer, 1000);
        }

        function updateTimer() {
            if (isPaused) return;
            
            timeRemaining--;
            updateTimerDisplay();
            
            if (timeRemaining <= 0) {
                clearInterval(exerciseTimer);
                nextExercise();
            }
        }

        function updateTimerDisplay() {
            document.getElementById('exerciseTimer').textContent = formatTime(timeRemaining);
        }

        function updateProgressBar() {
            const progress = ((currentExerciseIndex + 1) / currentRoutine.length) * 100;
            document.getElementById('progressBar').style.width = `${progress}%`;
        }

        function nextExercise() {
            clearInterval(exerciseTimer);
            currentExerciseIndex++;
            
            if (currentExerciseIndex >= currentRoutine.length) {
                showCompletionScreen();
            } else {
                startCurrentExercise();
            }
        }

        function togglePause() {
            isPaused = !isPaused;
            const button = document.getElementById('pauseExercise');
            button.textContent = isPaused ? '‚ñ∂ Resume' : '‚è∏ Pause';
        }

        function formatTime(seconds) {
            const mins = Math.floor(seconds / 60);
            const secs = seconds % 60;
            return `${mins}:${secs.toString().padStart(2, '0')}`;
        }

        // Screen navigation
        function showHomeScreen() {
            document.getElementById('homeScreen').classList.remove('hidden');
            document.getElementById('routineScreen').classList.add('hidden');
            document.getElementById('exerciseScreen').classList.add('hidden');
            document.getElementById('completionScreen').classList.add('hidden');
            clearInterval(exerciseTimer);
        }

        function showRoutineScreen() {
            document.getElementById('homeScreen').classList.add('hidden');
            document.getElementById('routineScreen').classList.remove('hidden');
            document.getElementById('exerciseScreen').classList.add('hidden');
            document.getElementById('completionScreen').classList.add('hidden');
        }

        function showExerciseScreen() {
            document.getElementById('homeScreen').classList.add('hidden');
            document.getElementById('routineScreen').classList.add('hidden');
            document.getElementById('exerciseScreen').classList.remove('hidden');
            document.getElementById('completionScreen').classList.add('hidden');
        }

        function showCompletionScreen() {
            document.getElementById('homeScreen').classList.add('hidden');
            document.getElementById('routineScreen').classList.add('hidden');
            document.getElementById('exerciseScreen').classList.add('hidden');
            document.getElementById('completionScreen').classList.remove('hidden');
            clearInterval(exerciseTimer);
        }
    </script>
</body>
</html>
